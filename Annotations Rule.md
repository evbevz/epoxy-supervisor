# Правила разметки датасетов

Чтобы тратить меньше времени на разметку, иметь повторяемость разметки и при этом даннные были более точные нетобходимо соблюдать несколько правил при подготовке датасетов.
Решил их отразить в виде рассуждений здесь.

Подготовка
----------
Разметку осуществляем в CVAT. Для каждого нового положения камеры (меняем ракурс, крепеж для инижектора и камеры и пр.) стоит создавать новый проект. И датасеты создавать уже в этом проекте в виде отдельных Task. Таким образом набор типов разметочных данных (Например то, что размечаем отдельно инжектор типом обрамляющего прямоугольника, центральную ось инжектора в виде полилинии из 20 сегментов, и большую и малые оси эллипса сечения уровня эпоксидки в виде отдельного объекта с типом skeleton) будет один раз определен для всего проекта и создании там Task будет использовать именно его.
В названии Task указывать номер проекта/камеры, последовательный номер Task (т.к. одних данных о количестве кадров в датасете может быть не достасточно).

Самым первым датасетом должнен стать датасет для создания полилинии центральной оси.
------------------------------------------------------------------------------------
Этот датасет необходимо создать с слабоподкрашенной жидкостью, чтобы на просвет хорошо была видна дальняя дуга эллипса (сечения плоскости дальней части инжектора). Но при этом не просто воду, т.к. с ней тоже не очень хорошо видна линия сечения из-за похожести с преломлением лучей через пластик. А так же этот небольшой датасет (с "правильным" цветом жидкости) в том числе можно будет использовать для обучения модели.
При этом освещение должно быть хорошим (основная задача сделать разметку центральной оси, а не обучить модель на разных данных), чтоб как можно точнее сделать разметку.
Инжектор долен занимать вертикальное положение (запускать, двигать и наклонять роборуку не требуется), плотно установлен в своё крепление (как и камера), без закрывающих поле обзора предметов (стяжки, резинки и пр.)
Заполнять инжектор жидкостью чуть больше 20мл, запустить запись видео до полного опустошения инжектора.
Из видео необходимо сделать не меньше 20 кадров с прохождением ближайшей дуги эллипса через риски шприца. Но лучше сделать больше - 80-100, чтобы уже на этапе разметки выбрать нужные кадры и точнее зафиксировать токи положения уровня эпоксидки и как следствие центра эллипса на каждом уровне.

При разметке калибровочного датасета сначала размечаются кадр фигурой типа Ellipse (в режиме Track) на первом кадре с положением истиного уровня жидкости 20мл
Затем находится последний кадр с пустым положеним инжектора и фигура Ellipse двигается и масштабируется на своё место.
Промежуточные кадры приблизительно автоматически будут поставлены на своё место.
Затем необходимо разметить (уточнить положение и масштаб) на кадре с истинным уроынем жидкости в 10мл. Опять же положение эллипса на промежуточных кадрах подвинется автоматически.
В дальнейшем так же методом деления пополам разметить (актуализировать) остальные кадры, чтобы были точные положения эллипса на уровнях равным ровным значениям 0,1,2,... 20мл.

